<h1><%= @article.title %></h1>
<p><%= @article.text %></p>

<% if user_signed_in? %>
  <ul>
    <li><%= link_to "Edit", edit_article_path(@article) %></li>
    <li><%= link_to "Destroy", article_path(@article), data: {
      turbo_method: :delete,
      turbo_confirm: "Are you sure?"
    } %></li>
  </ul>
<% end %>
<br />
<hr />
<%= link_to '<- Main page', articles_path %>
<hr />
<br />
<% if user_signed_in? %>
<h2>Add comment:</h2>

  <%= form_with model: [ @article, @article.comments.build ] do |form| %>

    <%= form.text_field :author, type: 'hidden', value: current_user.username %>

    <div>
      <%= form.text_area :body %>
    </div>

    <div>
      <%= form.submit %>
    </div>
<% end %>
<br />
<hr />
<% end %>
<h3>Comments</h3>
<% @article.comments.each do |comment| %>
  <h4><%= comment.author %></h4>
  <p><%= comment.body %></p>
<% end %>